(this["webpackJsonpzerion-defi-sdk-workshop"]=this["webpackJsonpzerion-defi-sdk-workshop"]||[]).push([[0],{10:function(e,t,n){e.exports={position:"Position_position__1xwJt",asset:"Position_asset__eQDhP",icon:"Position_icon__2fA9o",title:"Position_title__3Xt2L",chain:"Position_chain__ova4D",value:"Position_value__1a-18",number:"Position_number__1wD_Q"}},125:function(e,t){},157:function(e,t,n){"use strict";n.r(t);var a=n(2),c=n.n(a),s=n(35),o=n.n(s),i=(n(99),n(24)),r=n(7),u=n(5),l=n(19),d=n.n(l),j=n(44),m=n.n(j),b=n(0),v=function(e){var t=e.onSubmit,n=Object(a.useState)(""),c=Object(r.a)(n,2),s=c[0],o=c[1];return Object(b.jsxs)("form",{className:m.a.container,onSubmit:function(e){e.preventDefault(),t(s),o("")},children:[Object(b.jsx)("input",{autoComplete:"off",className:m.a.input,placeholder:"Paste Ethereum Address",value:s,onChange:function(e){return o(e.target.value||"")}}),Object(b.jsx)("div",{style:{width:"8px"}}),Object(b.jsx)("button",{type:"submit",disabled:!s,style:{pointerEvents:s?"auto":"none"},children:"Go!"})]})},p=n(26),_=n.n(p),f=n(18),O=n.n(f),h=new Intl.DateTimeFormat("en-US",{month:"short",day:"numeric"}),x=function(e,t){return new O.a(e).shiftedBy(t||0)};function g(e){var t=e.changes,n=null===t||void 0===t?void 0:t.reduce((function(e,t){return e+("in"===t.direction?1:0)}),0),a=null===t||void 0===t?void 0:t.reduce((function(e,t){return e+("out"===t.direction?1:0)}),0),c="";if(n>1)c="+".concat(n," ASSETS");else if(1===n){var s=null===t||void 0===t?void 0:t.find((function(e){return"in"===e.direction}));if(s){var o=x(s.value,0-s.asset.decimals).toFixed(2);c="+".concat(o," ").concat(s.asset.symbol)}}else if(1===a){var i=t.find((function(e){return"out"===e.direction}));if(i){var r=x(i.value,0-i.asset.decimals).toFixed(2);c="-".concat(r," ").concat(i.asset.symbol)}}else a>1&&(c="-".concat(a," ASSETS"));return c}var y=function(e){var t,n=e.transaction;return Object(b.jsxs)("div",{className:_.a.transaction,children:[Object(b.jsxs)("div",{children:[Object(b.jsx)("div",{className:_.a.type,children:(t=n.type,t?"".concat(t.slice(0,1).toUpperCase()).concat(t.slice(1)):"")}),Object(b.jsx)("div",{className:_.a.date,children:h.format(1e3*Number(n.mined_at))})]}),Object(b.jsx)("div",{className:_.a.value,children:g(n)})]})},N=n(10),S=n.n(N),w=function(e){var t;return(null===(t=e.symbol)||void 0===t?void 0:t.slice(0,3).toUpperCase())||"TOK"},k=function(e){var t,n=e.quantity,a=e.asset,c=e.chain;return x(n||0,0-((null===(t=a.implementations)||void 0===t?void 0:t[c].decimals)||18))},C=function(e){var t,n,a=e.quantity,c=e.asset,s=e.chain;return(null===(t=c.price)||void 0===t?void 0:t.value)?k({quantity:a,asset:c,chain:s}).times(null===(n=c.price)||void 0===n?void 0:n.value):new O.a(0)},F=function(e){var t,n,a=e.quantity,c=e.asset,s=e.chain;return(null===(t=c.price)||void 0===t?void 0:t.relative_change_24h)?C({quantity:a,asset:c,chain:s}).times((null===(n=c.price)||void 0===n?void 0:n.relative_change_24h)/100).abs().toFixed(2):0},q=function(e){var t;return(null===(t=e.asset.price)||void 0===t?void 0:t.relative_change_24h.toFixed(2))||0},I=function(e){var t;return(null===(t=e.price)||void 0===t?void 0:t.value)||0},P=function(e){var t=e.position,n=t.asset;return Object(b.jsxs)("div",{className:S.a.position,children:[Object(b.jsx)("img",{className:S.a.icon,src:n.icon_url||"",alt:w(n)}),Object(b.jsxs)("span",{className:S.a.title,children:[Object(b.jsx)("div",{children:n.name}),Object(b.jsx)("div",{className:S.a.chain,children:t.chain})]}),Object(b.jsx)("span",{className:S.a.number,children:"".concat(k(t).toFixed(2)).concat(n.symbol)}),Object(b.jsxs)("div",{className:S.a.value,children:[Object(b.jsx)("div",{className:S.a.number,children:"$".concat(C(t).toFixed(2))}),Object(b.jsx)("div",{className:S.a.number,style:{color:q(t)<0?"#ff4a4a":"#01a643"},children:"".concat(q(t),"% ($").concat(F(t),")")})]})]})},A=function(e){var t=e.asset;return Object(b.jsxs)("div",{className:S.a.asset,children:[Object(b.jsx)("img",{className:S.a.icon,src:t.icon_url||"",alt:w(t)}),Object(b.jsx)("span",{className:S.a.title,children:t.name}),Object(b.jsx)("div",{className:S.a.number,children:"$".concat(I(t).toFixed(2))})]})},B=n(20),T=n.n(B),M=["eth","0xc02aaa39b223fe8d0a0e5c4f27ead9083c756cc2","0x6b175474e89094c44da98b954eedeac495271d0f","0xa0b86991c6218b36c1d19d4a2e9eb0ce3606eb48","0xdac17f958d2ee523a2206206994597c13d831ec7"];var Q="ethereum";function L(e,t,n){if(e&&t&&n){var a,c=x(t,0-((null===(a=n.implementations)||void 0===a?void 0:a.ethereum.decimals)||18)).times(new O.a(e));if(n.price)return c.times(n.price.value).toFixed(2)}return""}function D(e,t){var n;return x(Number(e.output_amount),0-((null===(n=t.implementations)||void 0===n?void 0:n.ethereum.decimals)||18)).toFixed(2)}function R(e){var t,n,c,s=e.quote,o=e.asset,i=Object(u.f)({currency:"usd",asset_codes:["eth"]}).data,r=Object(a.useMemo)((function(){return Object.values((null===i||void 0===i?void 0:i.prices)||{})[0]||null}),[i]),l=Object(u.g)({namespace:"gas",mergeStrategy:u.c,body:Object(a.useMemo)((function(){return{scope:["price"],payload:{}}}),[])}).data,d=Object(a.useMemo)((function(){return String(null===l||void 0===l?void 0:l.price.fast)}),[l]);return Object(b.jsxs)("div",{className:T.a.quote,children:[Object(b.jsx)("div",{className:T.a.text,children:"Receive: ".concat(D(s,o)," ").concat(w(o))}),Object(b.jsx)("div",{className:T.a.text,children:"Network fee: $".concat(L(s.estimated_gas,d,r))}),Object(b.jsxs)("div",{className:T.a.contract,children:[Object(b.jsx)("img",{className:T.a.contractIcon,src:(null===(t=s.contract_metadata)||void 0===t?void 0:t.icon_url)||"",alt:(null===(n=s.contract_metadata)||void 0===n?void 0:n.name)||"Quote"}),null===(c=s.contract_metadata)||void 0===c?void 0:c.name]})]})}var U=n(84),E=n.n(U),z=n(45),K=n.n(z);function J(e){var t=e.children,n=e.onDissmiss;return Object(b.jsx)("div",{className:K.a.backdrop,onClick:n,children:Object(b.jsx)("div",{className:K.a.modal,onClick:function(e){return e.stopPropagation()},children:t})})}var G=n(6),V=n.n(G),$=n(46),H=n.n($),X=n(85),Y=n(86),Z=n.n(Y);function W(){return(W=Object(X.a)(H.a.mark((function e(t){return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Z.a.get("https://transactions.zerion.io/swap/quote/list",{params:t}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ee=function(e){var t,n=e.isLoading,a=e.receiveAsset,c=e.selectedQuote;return n?"Loading...":a&&c?x(Number(c.output_amount),0-((null===(t=a.implementations)||void 0===t?void 0:t.ethereum.decimals)||18)).toFixed(2):0},te=n(47),ne=n.n(te);function ae(e){var t=e.children,n=e.onDissmiss;return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("div",{className:ne.a.menu,onClick:function(e){return e.stopPropagation()},children:t}),Object(b.jsx)("div",{className:ne.a.backdrop,onClick:n})]})}function ce(e){var t,n=e.address,c=e.sendPosition,s=e.onValueChange,o=e.onPositionChange,i=Object(a.useState)(!1),l=Object(r.a)(i,2),d=l[0],j=l[1],m=Object(u.d)({currency:"usd",address:n||""},{enabled:Boolean(n)}).value;return Object(b.jsxs)("div",{className:V.a.firstRow,children:[Object(b.jsx)("input",{className:V.a.formInput,placeholder:"0",type:"number",onChange:function(e){return s(Number(e.target.value))}}),Object(b.jsxs)("button",{disabled:!m,onClick:function(){return j((function(e){return!e}))},className:V.a.formButton,children:[c?Object(b.jsx)("img",{className:V.a.buttonIcon,src:c.asset.icon_url||"",alt:(null===(t=c.asset.symbol)||void 0===t?void 0:t.slice(0,3).toUpperCase())||"TOK"}):null,m?c?c.asset.symbol:"Send token":"Loading..."]}),d?Object(b.jsx)(ae,{onDissmiss:function(){return j(!1)},children:null===m||void 0===m?void 0:m.positions.map((function(e){return Object(b.jsx)("button",{className:V.a.assetMenuButton,onClick:function(){o(e),j(!1)},children:Object(b.jsx)(P,{position:e})},e.id)}))}):null]})}var se=n(48);function oe(e){var t,n=e.isLoading,c=e.receiveAsset,s=e.selectedQuote,o=e.onAssetChange,i=Object(a.useState)(!1),l=Object(r.a)(i,2),d=l[0],j=l[1],m=Object(u.f)({currency:"usd",asset_codes:M}).value,v=Object(u.e)({currency:"usd",search_query:"",order_by:{market_cap:"desc"}}).value,p=Object(a.useMemo)((function(){return m&&v?[].concat(Object(se.a)(Object.values(m)),Object(se.a)(v.map((function(e){return e.asset})).filter((function(e){return!M.includes(e.asset_code)})))):null}),[m,v]);return Object(b.jsxs)("div",{className:V.a.secondRow,children:[Object(b.jsx)("input",{className:V.a.formInput,placeholder:"0",type:"text",value:ee({isLoading:n,receiveAsset:c,selectedQuote:s}),disabled:!0}),Object(b.jsxs)("button",{disabled:!p,className:V.a.formButton,onClick:function(){return j((function(e){return!e}))},children:[c?Object(b.jsx)("img",{className:V.a.buttonIcon,src:c.icon_url||"",alt:(null===(t=c.symbol)||void 0===t?void 0:t.slice(0,3).toUpperCase())||"TOK"}):null,p?c?c.symbol:"Receive token":"Loading..."]}),d?Object(b.jsx)(ae,{onDissmiss:function(){return j(!1)},children:null===p||void 0===p?void 0:p.map((function(e){return Object(b.jsx)("button",{className:V.a.assetMenuButton,onClick:function(){o(e),j(!1)},children:Object(b.jsx)(A,{asset:e})},e.asset_code)}))}):null]})}var ie=function(e){var t=e.address,n=Object(a.useState)(void 0),c=Object(r.a)(n,2),s=c[0],o=c[1],u=Object(a.useMemo)((function(){return E()(o,300)}),[]),l=Object(a.useState)(null),d=Object(r.a)(l,2),j=d[0],m=d[1],v=Object(a.useState)(null),p=Object(r.a)(v,2),_=p[0],f=p[1],O=Object(a.useMemo)((function(){var e;return j&&_&&s?{amount:x(s,(null===(e=j.asset.implementations)||void 0===e?void 0:e.ethereum.decimals)||18).toFixed(),input_token:j.asset.asset_code,output_token:_.asset_code,input_chain:Q,slippage:"3"}:null}),[j,_,s]),h=Object(i.useQuery)(["getQuotes",O],(function(){return O?function(e){return W.apply(this,arguments)}(O):null}),{retry:1,refetchInterval:2e4,enabled:Boolean(O)}),g=h.data,y=h.isLoading,N=Object(a.useMemo)((function(){return(null===g||void 0===g?void 0:g.data)||[]}),[g]),S=function(e,t,n){var c=Object(a.useState)(null),s=Object(r.a)(c,2),o=s[0],i=s[1],u=Object(a.useMemo)((function(){return(null===e||void 0===e?void 0:e.length)?o&&e.find((function(e){var t;return(null===(t=e.contract_metadata)||void 0===t?void 0:t.id)===o}))||e[0]:null}),[e,o]);return Object(a.useEffect)((function(){i(null)}),[t,n]),{selectedQuote:u,setSelecetedQuoteId:i}}(N,j,_),w=S.selectedQuote,k=S.setSelecetedQuoteId;return Object(b.jsxs)("div",{className:V.a.form,children:[Object(b.jsx)("h2",{className:V.a.formTitle,children:"Swap!"}),Object(b.jsx)(ce,{address:t,sendPosition:j,onPositionChange:m,onValueChange:u}),Object(b.jsx)(oe,{isLoading:y,receiveAsset:_,selectedQuote:w,onAssetChange:f}),Object(b.jsx)("div",{className:V.a.quotes,children:_?null===N||void 0===N?void 0:N.map((function(e,t){var n,a,c;return Object(b.jsx)("button",{className:V.a.quoteButton,onClick:function(){var t;return k((null===(t=e.contract_metadata)||void 0===t?void 0:t.id)||null)},style:{borderColor:(null===(a=e.contract_metadata)||void 0===a?void 0:a.id)===(null===w||void 0===w||null===(c=w.contract_metadata)||void 0===c?void 0:c.id)?"#2558d9":"#e6e7e9"},children:Object(b.jsx)(R,{quote:e,asset:_})},(null===(n=e.contract_metadata)||void 0===n?void 0:n.id)||t)})):null})]})},re=function(e){var t=e.address,n=Object(a.useState)(!1),c=Object(r.a)(n,2),s=c[0],o=c[1];return t?Object(b.jsxs)(b.Fragment,{children:[s?null:Object(b.jsx)("button",{className:V.a.swapButton,onClick:function(){return o((function(e){return!e}))},children:"Swap!"}),s?Object(b.jsx)(J,{onDissmiss:function(){return o(!1)},children:Object(b.jsx)(ie,{address:t})}):null]}):null},ue=function(){var e=Object(a.useState)(localStorage["ls-address-key"]||null),t=Object(r.a)(e,2),n=t[0],c=t[1],s=Object(a.useCallback)((function(e){c(e||""),function(e){e&&(localStorage["ls-address-key"]=e)}(e||"")}),[]);return[n,s]},le=function(e){var t,n=e.address,a=Object(u.d)({currency:"USD",address:n||""},{enabled:Boolean(n)}).value;return a?Object(b.jsx)(b.Fragment,{children:null===(t=a.positions)||void 0===t?void 0:t.map((function(e){return Object(b.jsx)(P,{position:e},e.id)}))}):Object(b.jsx)("div",{children:"Loading..."})};var de=function(e){var t,n=function(e){return Object(u.g)({namespace:"address",mergeStrategy:u.b,getId:Object(a.useCallback)((function(e){return e.hash}),[]),body:Object(a.useMemo)((function(){return{scope:["transactions"],payload:{address:e,currency:"USD"}}}),[e])})}(e.address);return n.value?Object(b.jsx)(b.Fragment,{children:null===(t=n.value||[])||void 0===t?void 0:t.map((function(e){return Object(b.jsx)(y,{transaction:e},e.hash)}))}):Object(b.jsx)("div",{children:"Loading..."})};u.a.configure({url:"wss://api-v4.zerion.io",apiToken:"Zerion.0JOY6zZTTw6yl5Cvz9sdmXc7d5AhzVMG",hooks:{willSendRequest:function(e){return e.payload.lol="lol",e}}}),Object.assign(window,{client:u.a});var je=function(){var e=ue(),t=Object(r.a)(e,2),n=t[0],a=t[1];return Object(b.jsxs)("div",{className:d.a.page,children:[Object(b.jsx)("header",{children:Object(b.jsx)(v,{onSubmit:a})}),n?Object(b.jsxs)("section",{className:d.a.grid,children:[Object(b.jsxs)("div",{className:d.a.column,children:[Object(b.jsx)("h2",{children:"Positions"}),Object(b.jsx)(le,{address:n})]}),Object(b.jsxs)("div",{className:d.a.column,children:[Object(b.jsx)("h2",{children:"History"}),Object(b.jsx)(de,{address:n})]})]}):Object(b.jsx)("section",{className:d.a.noAddress,children:"No address to watch \ud83e\uddd0"}),Object(b.jsx)(re,{address:n})]})},me=new i.QueryClient;o.a.render(Object(b.jsx)(c.a.StrictMode,{children:Object(b.jsx)(i.QueryClientProvider,{client:me,children:Object(b.jsx)(je,{})})}),document.getElementById("root"))},19:function(e,t,n){e.exports={page:"App_page__CKP-2",grid:"App_grid__3DnSg",noAddress:"App_noAddress__2gSHI",column:"App_column__17gO4"}},20:function(e,t,n){e.exports={quote:"Quote_quote__1xSut",text:"Quote_text__1OOm3",contract:"Quote_contract__2junB",contractIcon:"Quote_contractIcon__s6E17"}},26:function(e,t,n){e.exports={transaction:"Transaction_transaction__SLnLT",type:"Transaction_type__7TiGL",date:"Transaction_date__2F9SK",value:"Transaction_value__2TIPJ"}},44:function(e,t,n){e.exports={container:"AddressInput_container__2Gyn6",input:"AddressInput_input__1gcqW"}},45:function(e,t,n){e.exports={backdrop:"Modal_backdrop__2nwuK",modal:"Modal_modal__3EV2L"}},47:function(e,t,n){e.exports={menu:"Menu_menu__1eOHT",backdrop:"Menu_backdrop__1dJfo"}},6:function(e,t,n){e.exports={swapButton:"SwapForm_swapButton__1GxSO",form:"SwapForm_form__2VnFm",formTitle:"SwapForm_formTitle__310xo",firstRow:"SwapForm_firstRow__3qnwq",formInput:"SwapForm_formInput__3UhoU",assetMenuButton:"SwapForm_assetMenuButton__5CPfe",formButton:"SwapForm_formButton__2K4yR",buttonIcon:"SwapForm_buttonIcon__1C18y",secondRow:"SwapForm_secondRow__3UhYt",quotes:"SwapForm_quotes__3bc6o",quoteButton:"SwapForm_quoteButton__3PInD"}},99:function(e,t,n){}},[[157,1,2]]]);
//# sourceMappingURL=main.5db67aee.chunk.js.map