(this["webpackJsonpzerion-defi-sdk-workshop"]=this["webpackJsonpzerion-defi-sdk-workshop"]||[]).push([[0],{10:function(e,t,n){e.exports={asset:"Position_asset__1nnbI",icon:"Position_icon__jOSzI",title:"Position_title__2-0BU",value:"Position_value__IK7l2",number:"Position_number__2nQjg"}},125:function(e,t){},157:function(e,t,n){"use strict";n.r(t);var a=n(2),c=n.n(a),s=n(35),o=n.n(s),i=(n(99),n(24)),r=n(9),u=n(5),l=n(19),d=n.n(l),j=n(44),m=n.n(j),b=n(0),v=function(e){var t=e.onSubmit,n=Object(a.useState)(""),c=Object(r.a)(n,2),s=c[0],o=c[1];return Object(b.jsxs)("form",{className:m.a.container,onSubmit:function(e){e.preventDefault(),t(s),o("")},children:[Object(b.jsx)("input",{autoComplete:"off",className:m.a.input,placeholder:"Paste Etherium Address",value:s,onChange:function(e){return o(e.target.value||"")}}),Object(b.jsx)("div",{style:{width:"8px"}}),Object(b.jsx)("button",{type:"submit",disabled:!s,style:{pointerEvents:s?"auto":"none"},children:"Go!"})]})},p=n(26),_=n.n(p),f=n(14),O=n.n(f),h=new Intl.DateTimeFormat("en-US",{month:"short",day:"numeric"}),x=function(e,t){return new O.a(e).shiftedBy(t||0)};function y(e){var t=e.changes,n=null===t||void 0===t?void 0:t.reduce((function(e,t){return e+("in"===t.direction?1:0)}),0),a=null===t||void 0===t?void 0:t.reduce((function(e,t){return e+("out"===t.direction?1:0)}),0),c="";if(n>1)c="+".concat(n," ASSETS");else if(1===n){var s=null===t||void 0===t?void 0:t.find((function(e){return"in"===e.direction}));if(s){var o=new O.a(s.value),i=Number(o.shiftedBy(0-s.asset.decimals).toFixed(2));c="+".concat(i," ").concat(s.asset.symbol)}}else if(1===a){var r=t.find((function(e){return"out"===e.direction}));if(r){var u=new O.a(r.value),l=Number(u.shiftedBy(0-r.asset.decimals).toFixed(2));c="-".concat(l," ").concat(r.asset.symbol)}}else a>1&&(c="-".concat(a," ASSETS"));return c}var N=function(e){var t,n=e.transaction;return Object(b.jsxs)("div",{className:_.a.transaction,children:[Object(b.jsxs)("div",{children:[Object(b.jsx)("div",{className:_.a.type,children:(t=n.type,t?"".concat(t.slice(0,1).toUpperCase()).concat(t.slice(1)):"")}),Object(b.jsx)("div",{className:_.a.date,children:h.format(1e3*Number(n.mined_at))})]}),Object(b.jsx)("div",{className:_.a.value,children:y(n)})]})},g=n(10),w=n.n(g),S=function(e){var t=e.quantity,n=e.asset;return new O.a(t||0).shiftedBy(0-n.decimals)},k=function(e){var t,n,a=e.quantity,c=e.asset;return(null===(t=c.price)||void 0===t?void 0:t.value)?S({quantity:a,asset:c}).times(null===(n=c.price)||void 0===n?void 0:n.value):new O.a(0)},C=function(e){var t,n,a=e.quantity,c=e.asset;return(null===(t=c.price)||void 0===t?void 0:t.relative_change_24h)?k({quantity:a,asset:c}).times((null===(n=c.price)||void 0===n?void 0:n.relative_change_24h)/100):0},B=function(e){var t,n=e.position,a=n.asset;return Object(b.jsxs)("div",{className:w.a.asset,children:[Object(b.jsx)("img",{className:w.a.icon,src:a.icon_url||"",alt:(null===(t=a.symbol)||void 0===t?void 0:t.slice(0,3).toUpperCase())||"TOK"}),Object(b.jsx)("span",{className:w.a.title,children:a.name}),Object(b.jsx)("span",{className:w.a.number,children:"".concat(S(n).toFixed(2)).concat(a.symbol)}),Object(b.jsxs)("div",{className:w.a.value,children:[Object(b.jsx)("div",{className:w.a.number,children:"".concat(k(n).toFixed(2),"$")}),Object(b.jsx)("div",{className:w.a.number,style:{color:C(n)<0?"#ff4a4a":"#01a643"},children:"".concat(C(n).toFixed(2),"$")})]})]})},F=function(e){var t,n=e.asset;return Object(b.jsxs)("div",{className:w.a.asset,children:[Object(b.jsx)("img",{className:w.a.icon,src:n.icon_url||"",alt:(null===(t=n.symbol)||void 0===t?void 0:t.slice(0,3).toUpperCase())||"TOK"}),Object(b.jsx)("span",{className:w.a.title,children:n.name})]})},I=function(){var e=Object(a.useState)(localStorage["ls-address-key"]||null),t=Object(r.a)(e,2),n=t[0],c=t[1],s=Object(a.useCallback)((function(e){c(e||""),function(e){e&&(localStorage["ls-address-key"]=e)}(e||"")}),[]);return[n,s]},q=function(e){var t,n=e.address,a=Object(u.d)({currency:"USD",address:n||""},{enabled:Boolean(n)}).value;return a?Object(b.jsx)(b.Fragment,{children:null===(t=a.positions)||void 0===t?void 0:t.map((function(e){return Object(b.jsx)(B,{position:e},e.id)}))}):Object(b.jsx)("div",{children:"Loading..."})};var M=function(e){var t,n=function(e){return Object(u.g)({namespace:"address",mergeStrategy:u.b,getId:Object(a.useCallback)((function(e){return e.hash}),[]),body:Object(a.useMemo)((function(){return{scope:["transactions"],payload:{address:e,currency:"USD"}}}),[e])})}(e.address);return n.value?Object(b.jsx)(b.Fragment,{children:null===(t=n.value||[])||void 0===t?void 0:t.map((function(e){return Object(b.jsx)(N,{transaction:e},e.hash)}))}):Object(b.jsx)("div",{children:"Loading..."})},T=n(48),A=n(84),U=n.n(A),D=["eth","0xc02aaa39b223fe8d0a0e5c4f27ead9083c756cc2","0x6b175474e89094c44da98b954eedeac495271d0f","0xa0b86991c6218b36c1d19d4a2e9eb0ce3606eb48","0xdac17f958d2ee523a2206206994597c13d831ec7"],P=n(45),K=n.n(P);function Q(e){var t=e.children,n=e.onDissmiss;return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("div",{className:K.a.menu,onClick:function(e){return e.stopPropagation()},children:t}),Object(b.jsx)("div",{className:K.a.backdrop,onClick:n})]})}var R=n(46),z=n.n(R);function E(e){var t=e.children,n=e.onDissmiss;return Object(b.jsx)("div",{className:z.a.backdrop,onClick:n,children:Object(b.jsx)("div",{className:z.a.modal,onClick:function(e){return e.stopPropagation()},children:t})})}var L=n(7),H=n.n(L),G=n(47),J=n.n(G),$=n(85),Y=n(86),V=n.n(Y);function X(){return(X=Object($.a)(J.a.mark((function e(t){return J.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",V.a.get("https://transactions.zerion.io/swap/quote/list",{params:t}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Z="ethereum",W=n(20),ee=n.n(W);function te(e){var t,n,c,s,o=e.quote,i=e.asset,r=Object(u.f)({currency:"usd",asset_codes:["eth"]}).data;console.log(r);var l=Object(a.useMemo)((function(){return Object.values((null===r||void 0===r?void 0:r.prices)||{})[0]||null}),[r]),d=Object(u.g)({namespace:"gas",mergeStrategy:u.c,body:Object(a.useMemo)((function(){return{scope:["price"],payload:{}}}),[])}).data,j=Object(a.useMemo)((function(){return String(null===d||void 0===d?void 0:d.price.fast)}),[d]),m=o.estimated_gas,v=m&&j&&l?function(e,t,n){var a,c=x(t,0-((null===(a=n.implementations)||void 0===a?void 0:a.ethereum.decimals)||18)).times(new O.a(e));return n.price?c.times(n.price.value):null}(m,j,l):null;return Object(b.jsxs)("div",{className:ee.a.quote,children:[Object(b.jsx)("div",{className:ee.a.text,children:"Receive: $".concat(x(Number(o.output_amount),0-((null===(t=i.implementations)||void 0===t?void 0:t.ethereum.decimals)||18)).toFixed(2))}),Object(b.jsx)("div",{className:ee.a.text,children:"Network fee: $".concat(null===v||void 0===v?void 0:v.toFixed(2))}),Object(b.jsxs)("div",{className:ee.a.contract,children:[Object(b.jsx)("img",{className:ee.a.contractIcon,src:(null===(n=o.contract_metadata)||void 0===n?void 0:n.icon_url)||"",alt:(null===(c=o.contract_metadata)||void 0===c?void 0:c.name)||"Quote"}),null===(s=o.contract_metadata)||void 0===s?void 0:s.name]})]})}var ne=function(e){var t,n,c=e.address,s=Object(a.useState)(!1),o=Object(r.a)(s,2),l=o[0],d=o[1],j=Object(a.useState)(!1),m=Object(r.a)(j,2),v=m[0],p=m[1],_=Object(a.useState)(void 0),f=Object(r.a)(_,2),O=f[0],h=f[1],y=Object(a.useState)(null),N=Object(r.a)(y,2),g=N[0],w=N[1],S=Object(a.useState)(null),k=Object(r.a)(S,2),C=k[0],I=k[1],q=Object(u.d)({currency:"usd",address:c||""},{enabled:Boolean(c)}).value,M=Object(u.f)({currency:"usd",asset_codes:D}).value,A=Object(u.e)({currency:"usd",search_query:"",order_by:{market_cap:"desc"}}).value,P=Object(a.useMemo)((function(){return U()(h,300)}),[]),K=Object(a.useMemo)((function(){return M&&A?[].concat(Object(T.a)(Object.values(M)),Object(T.a)(A.map((function(e){return e.asset})).filter((function(e){return!D.includes(e.asset_code)})))):null}),[M,A]),R=Object(a.useMemo)((function(){var e;return g&&C&&O?{amount:x(O,(null===(e=g.asset.implementations)||void 0===e?void 0:e.ethereum.decimals)||18).toFixed(),input_token:g.asset.asset_code,output_token:C.asset_code,input_chain:Z,slippage:"3"}:null}),[g,C,O]),z=Object(i.useQuery)(["getQuotes",R],(function(){return R?function(e){return X.apply(this,arguments)}(R):null}),{retry:1,refetchInterval:2e4,enabled:Boolean(R)}),E=z.data,L=z.isLoading,G=Object(a.useMemo)((function(){return null===E||void 0===E?void 0:E.data}),[E]),J=Object(a.useState)(null),$=Object(r.a)(J,2),Y=$[0],V=$[1],W=Object(a.useMemo)((function(){return(null===G||void 0===G?void 0:G.length)?Y&&G.find((function(e){var t;return(null===(t=e.contract_metadata)||void 0===t?void 0:t.id)===Y}))||G[0]:null}),[G,Y]),ee=Object(a.useMemo)((function(){var e;return L?"Loading...":C&&W?x(Number(W.output_amount),0-((null===(e=C.implementations)||void 0===e?void 0:e.ethereum.decimals)||18)).toFixed(2):0}),[L,C,W]);return console.log(Y),Object(a.useEffect)((function(){V(null)}),[g,C]),Object(b.jsxs)("div",{className:H.a.form,children:[Object(b.jsx)("h2",{className:H.a.formTitle,children:"Swap!"}),Object(b.jsxs)("div",{className:H.a.firstRow,children:[Object(b.jsx)("input",{className:H.a.formInput,placeholder:"0",type:"number",onChange:function(e){return P(Number(e.target.value))}}),Object(b.jsxs)("button",{disabled:!q,onClick:function(){return d((function(e){return!e}))},className:H.a.formButton,children:[g?Object(b.jsx)("img",{className:H.a.buttonIcon,src:g.asset.icon_url||"",alt:(null===(t=g.asset.symbol)||void 0===t?void 0:t.slice(0,3).toUpperCase())||"TOK"}):null,q?g?g.asset.symbol:"Send token":"Loading..."]}),l?Object(b.jsx)(Q,{onDissmiss:function(){return d(!1)},children:null===q||void 0===q?void 0:q.positions.map((function(e){return Object(b.jsx)("button",{className:H.a.assetMenuButton,onClick:function(){w(e),d(!1)},children:Object(b.jsx)(B,{position:e})},e.id)}))}):null]}),Object(b.jsxs)("div",{className:H.a.secondRow,children:[Object(b.jsx)("input",{className:H.a.formInput,placeholder:"0",type:"text",value:ee,disabled:!0}),Object(b.jsxs)("button",{disabled:!K,className:H.a.formButton,onClick:function(){return p((function(e){return!e}))},children:[C?Object(b.jsx)("img",{className:H.a.buttonIcon,src:C.icon_url||"",alt:(null===(n=C.symbol)||void 0===n?void 0:n.slice(0,3).toUpperCase())||"TOK"}):null,K?C?C.symbol:"Receive token":"Loading..."]}),v?Object(b.jsx)(Q,{onDissmiss:function(){return p(!1)},children:null===K||void 0===K?void 0:K.map((function(e){return Object(b.jsx)("button",{className:H.a.assetMenuButton,onClick:function(){I(e),p(!1)},children:Object(b.jsx)(F,{asset:e})},e.asset_code)}))}):null]}),Object(b.jsx)("div",{className:H.a.quotes,children:C?null===G||void 0===G?void 0:G.map((function(e,t){var n,a,c;return Object(b.jsx)("button",{className:H.a.quoteButton,onClick:function(){var t;return V((null===(t=e.contract_metadata)||void 0===t?void 0:t.id)||null)},style:{borderColor:(null===(a=e.contract_metadata)||void 0===a?void 0:a.id)===(null===W||void 0===W||null===(c=W.contract_metadata)||void 0===c?void 0:c.id)?"#2558d9":"#e6e7e9"},children:Object(b.jsx)(te,{quote:e,asset:C})},(null===(n=e.contract_metadata)||void 0===n?void 0:n.id)||t)})):null})]})},ae=function(e){var t=e.address,n=Object(a.useState)(!1),c=Object(r.a)(n,2),s=c[0],o=c[1];return t?Object(b.jsxs)(b.Fragment,{children:[s?null:Object(b.jsx)("button",{className:H.a.swapButton,onClick:function(){return o((function(e){return!e}))},children:"Swap!"}),s?Object(b.jsx)(E,{onDissmiss:function(){return o(!1)},children:Object(b.jsx)(ne,{address:t})}):null]}):null};u.a.configure({url:"wss://api-v4.zerion.io",apiToken:"Zerion.0JOY6zZTTw6yl5Cvz9sdmXc7d5AhzVMG",hooks:{willSendRequest:function(e){return e.payload.lol="lol",e}}}),Object.assign(window,{client:u.a});var ce=function(){var e=I(),t=Object(r.a)(e,2),n=t[0],a=t[1];return Object(b.jsxs)("div",{className:d.a.page,children:[Object(b.jsx)("header",{children:Object(b.jsx)(v,{onSubmit:a})}),n?Object(b.jsxs)("section",{className:d.a.grid,children:[Object(b.jsxs)("div",{className:d.a.column,children:[Object(b.jsx)("h2",{children:"Positions"}),Object(b.jsx)(q,{address:n})]}),Object(b.jsxs)("div",{className:d.a.column,children:[Object(b.jsx)("h2",{children:"History"}),Object(b.jsx)(M,{address:n})]})]}):Object(b.jsx)("section",{className:d.a.noAddress,children:"No address to watch \ud83e\uddd0"}),Object(b.jsx)(ae,{address:n})]})},se=new i.QueryClient;o.a.render(Object(b.jsx)(c.a.StrictMode,{children:Object(b.jsx)(i.QueryClientProvider,{client:se,children:Object(b.jsx)(ce,{})})}),document.getElementById("root"))},19:function(e,t,n){e.exports={page:"App_page__CKP-2",grid:"App_grid__3DnSg",noAddress:"App_noAddress__2gSHI",column:"App_column__17gO4"}},20:function(e,t,n){e.exports={quote:"Quote_quote__2eCbw",text:"Quote_text__3B_mt",contract:"Quote_contract__26cKs",contractIcon:"Quote_contractIcon__2o_l6"}},26:function(e,t,n){e.exports={transaction:"Transaction_transaction__2KNqs",type:"Transaction_type__TNX67",date:"Transaction_date__6tnDo",value:"Transaction_value__3IHyE"}},44:function(e,t,n){e.exports={container:"AddressInput_container__2GKkU",input:"AddressInput_input__aTClS"}},45:function(e,t,n){e.exports={menu:"Menu_menu__1eOHT",backdrop:"Menu_backdrop__1dJfo"}},46:function(e,t,n){e.exports={backdrop:"Modal_backdrop__2nwuK",modal:"Modal_modal__3EV2L"}},7:function(e,t,n){e.exports={swapButton:"SwapForm_swapButton__3ptnk",form:"SwapForm_form__2wRaU",formTitle:"SwapForm_formTitle__2TBGy",firstRow:"SwapForm_firstRow__2m8jJ",formInput:"SwapForm_formInput__3N1tM",assetMenuButton:"SwapForm_assetMenuButton__q7OHb",formButton:"SwapForm_formButton__1kUlF",buttonIcon:"SwapForm_buttonIcon__3xBA1",secondRow:"SwapForm_secondRow__NGcwo",quotes:"SwapForm_quotes__1pYaj",quoteButton:"SwapForm_quoteButton__3oWYH"}},99:function(e,t,n){}},[[157,1,2]]]);
//# sourceMappingURL=main.0b5967f7.chunk.js.map